<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.4.549">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">

<meta name="author" content="Steven Kerr">
<meta name="dcterms.date" content="2024-01-31">

<title>Data Report</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for syntax highlighting */
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
  }
pre.numberSource { margin-left: 3em;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
</style>


<script src="data-report_files/libs/clipboard/clipboard.min.js"></script>
<script src="data-report_files/libs/quarto-html/quarto.js"></script>
<script src="data-report_files/libs/quarto-html/popper.min.js"></script>
<script src="data-report_files/libs/quarto-html/tippy.umd.min.js"></script>
<script src="data-report_files/libs/quarto-html/anchor.min.js"></script>
<link href="data-report_files/libs/quarto-html/tippy.css" rel="stylesheet">
<link href="data-report_files/libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="data-report_files/libs/bootstrap/bootstrap.min.js"></script>
<link href="data-report_files/libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="data-report_files/libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">


</head>

<body>

<div id="quarto-content" class="page-columns page-rows-contents page-layout-article">
<div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
  <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">Table of contents</h2>
   
  <ul class="collapse">
  <li><a href="#overview" id="toc-overview" class="nav-link active" data-scroll-target="#overview">Overview</a></li>
  <li><a href="#mpox-case-data" id="toc-mpox-case-data" class="nav-link" data-scroll-target="#mpox-case-data">Mpox Case Data</a>
  <ul class="collapse">
  <li><a href="#aggregated-case-data" id="toc-aggregated-case-data" class="nav-link" data-scroll-target="#aggregated-case-data">Aggregated case data</a></li>
  <li><a href="#detailed-case-data" id="toc-detailed-case-data" class="nav-link" data-scroll-target="#detailed-case-data">Detailed case data</a></li>
  </ul></li>
  <li><a href="#wikipedia-data" id="toc-wikipedia-data" class="nav-link" data-scroll-target="#wikipedia-data">Wikipedia Data</a>
  <ul class="collapse">
  <li><a href="#page-views" id="toc-page-views" class="nav-link" data-scroll-target="#page-views">Page views</a></li>
  <li><a href="#project-views" id="toc-project-views" class="nav-link" data-scroll-target="#project-views">Project views</a></li>
  </ul></li>
  <li><a href="#appendix" id="toc-appendix" class="nav-link" data-scroll-target="#appendix">Appendix</a></li>
  </ul>
</nav>
</div>
<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title">Data Report</h1>
<p class="subtitle lead">Assessing Public Attention Towards the 2022-2023 Mpox Outbreak Using Wikipedia</p>
</div>



<div class="quarto-title-meta">

    <div>
    <div class="quarto-title-meta-heading">Author</div>
    <div class="quarto-title-meta-contents">
             <p>Steven Kerr </p>
          </div>
  </div>
    
    <div>
    <div class="quarto-title-meta-heading">Published</div>
    <div class="quarto-title-meta-contents">
      <p class="date">31 January 2024</p>
    </div>
  </div>
  
    
  </div>
  


</header>


<section id="overview" class="level1">
<h1>Overview</h1>
<p>My topic focuses on assessing public attention towards the 2022-2023 multi-country mpox outbreak using Wikipedia data. As such, this analysis relies on two main data sources. First, country-level data on the weekly number of mpox cases is sourced from the World Health Organization (WHO). Second, Wikipedia analytics data on page view volume is sourced directly from Wikipedia.</p>
<p>Before exploring the data, I’ll start by loading all dependencies.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb1"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="co"># install dependencies</span></span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a><span class="co">#remotes::install_github("wikimedia/waxer@main")</span></span>
<span id="cb1-3"><a href="#cb1-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-4"><a href="#cb1-4" aria-hidden="true" tabindex="-1"></a><span class="co"># load dependencies</span></span>
<span id="cb1-5"><a href="#cb1-5" aria-hidden="true" tabindex="-1"></a>pacman<span class="sc">::</span><span class="fu">p_load</span>(</span>
<span id="cb1-6"><a href="#cb1-6" aria-hidden="true" tabindex="-1"></a>  dplyr,      <span class="co"># wrangle data    </span></span>
<span id="cb1-7"><a href="#cb1-7" aria-hidden="true" tabindex="-1"></a>  forcats,    <span class="co"># factors</span></span>
<span id="cb1-8"><a href="#cb1-8" aria-hidden="true" tabindex="-1"></a>  ggplot2,    <span class="co"># visualize data     </span></span>
<span id="cb1-9"><a href="#cb1-9" aria-hidden="true" tabindex="-1"></a>  glue,       <span class="co"># string literals</span></span>
<span id="cb1-10"><a href="#cb1-10" aria-hidden="true" tabindex="-1"></a>  gt,         <span class="co"># formatting tables</span></span>
<span id="cb1-11"><a href="#cb1-11" aria-hidden="true" tabindex="-1"></a>  here,       <span class="co"># file paths</span></span>
<span id="cb1-12"><a href="#cb1-12" aria-hidden="true" tabindex="-1"></a>  janitor,    <span class="co"># tidy &amp; explore data</span></span>
<span id="cb1-13"><a href="#cb1-13" aria-hidden="true" tabindex="-1"></a>  lubridate,  <span class="co"># dates &amp; times</span></span>
<span id="cb1-14"><a href="#cb1-14" aria-hidden="true" tabindex="-1"></a>  purrr,      <span class="co"># vectorize operations</span></span>
<span id="cb1-15"><a href="#cb1-15" aria-hidden="true" tabindex="-1"></a>  RccpRoll,   <span class="co"># time series</span></span>
<span id="cb1-16"><a href="#cb1-16" aria-hidden="true" tabindex="-1"></a>  readr,      <span class="co"># import data  </span></span>
<span id="cb1-17"><a href="#cb1-17" aria-hidden="true" tabindex="-1"></a>  scales,     <span class="co"># scaling plots</span></span>
<span id="cb1-18"><a href="#cb1-18" aria-hidden="true" tabindex="-1"></a>  tidyr,      <span class="co"># tidy data</span></span>
<span id="cb1-19"><a href="#cb1-19" aria-hidden="true" tabindex="-1"></a>  waxer       <span class="co"># wikipedia data</span></span>
<span id="cb1-20"><a href="#cb1-20" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb1-21"><a href="#cb1-21" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-22"><a href="#cb1-22" aria-hidden="true" tabindex="-1"></a><span class="co"># load custom functions</span></span>
<span id="cb1-23"><a href="#cb1-23" aria-hidden="true" tabindex="-1"></a><span class="fu">source</span>(<span class="fu">here</span>(<span class="st">"code/funcs/helpers.R"</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="mpox-case-data" class="level1">
<h1>Mpox Case Data</h1>
<p>Mpox case data can be further divided into two subgroups based on their level of granularity. First, aggregated case data consists of the daily number of new cases by the date they were reported to public health authorities. Second, detailed case data comprises the daily number of new cases by either date of onset, date of diagnosis, or date or report. While both types of data are reported with a daily frequency at the country-level, their respective advantages and disadvantages give good reason to include both in this analysis.</p>
<section id="aggregated-case-data" class="level2">
<h2 class="anchored" data-anchor-id="aggregated-case-data">Aggregated case data</h2>
<p>Daily aggregated numbers of mpox cases by country correspond with the date on which cases were reported to public health authorities. One advantage of this dataset is that it is considered to be largely complete since it comprises every confirmed and probable case reported to the national public health authorities.<a href="#fn1" class="footnote-ref" id="fnref1" role="doc-noteref"><sup>1</sup></a> While this still leaves room for cases to go underreported in instances where an individual does not seek medical attention (e.g., for fear of stygmatization) or for asymptomatic cases, it still represents the most comprehensive view of the outbreak’s scale. Aggregated data is available for all reported cases as of 31 December 2023.</p>
<p>The aggregated dataset consists of the following variables:</p>
<ul>
<li><p><code>country</code>: The country, area, or territory in which a given case was reported. Note that this does not necessarily correspond with the location where the patient was infected.</p></li>
<li><p><code>iso3</code>: Three-letter country codes corresponding with a country, area, or territory.</p></li>
<li><p><code>who_region</code>: Regions into which each country, area, or territory has been assigned by WHO. There are six regions: African Region, Region of the Americas, Eastern Mediterranean Region, European Region, South-East Asian Region, and Western Pacific Region.<a href="#fn2" class="footnote-ref" id="fnref2" role="doc-noteref"><sup>2</sup></a></p></li>
<li><p><code>date</code>: The date on which cases were reported to public health authorities.</p></li>
<li><p><code>new_confirmed_cases</code>: The number of new confirmed cases reported to public health authorities on a given date.</p></li>
<li><p><code>new_probable_cases</code>: The number of new probable cases reported to public health authorities on a given date.</p></li>
<li><p><code>new_deaths</code>: The number of new deaths reported to public health authorities on a given date. This does not necessarily reflect the precise date on which a case died, just the date on which public health authorities were notified of the death.</p></li>
<li><p><code>total_confirmed_cases</code>: The cumulative number of confirmed cases reported to public health authorities by a given date.</p></li>
<li><p><code>total_probable_cases</code>: The cumulative number of probable cases reported to public health authorities by a given date.</p></li>
<li><p><code>total_deaths</code>: The cumulative number of deaths reported to public health authorities by a given date.</p></li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb2"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true" tabindex="-1"></a><span class="co"># aggregate data</span></span>
<span id="cb2-2"><a href="#cb2-2" aria-hidden="true" tabindex="-1"></a>agg <span class="ot">&lt;-</span> <span class="fu">read_csv</span>(<span class="fu">here</span>(<span class="st">"data/WHO/mpox cases by country as of 31 December 2023.csv"</span>)) </span>
<span id="cb2-3"><a href="#cb2-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-4"><a href="#cb2-4" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(agg)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div class="kable-table">
<table class="table table-sm table-striped small">
<colgroup>
<col style="width: 5%">
<col style="width: 3%">
<col style="width: 10%">
<col style="width: 7%">
<col style="width: 15%">
<col style="width: 14%">
<col style="width: 13%">
<col style="width: 13%">
<col style="width: 8%">
<col style="width: 7%">
</colgroup>
<thead>
<tr class="header">
<th style="text-align: left;">country</th>
<th style="text-align: left;">iso3</th>
<th style="text-align: left;">who_region</th>
<th style="text-align: left;">date</th>
<th style="text-align: right;">total_confirmed_cases</th>
<th style="text-align: right;">total_probable_cases</th>
<th style="text-align: right;">new_confirmed_cases</th>
<th style="text-align: right;">new_probable_cases</th>
<th style="text-align: right;">total_deaths</th>
<th style="text-align: right;">new_deaths</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">Benin</td>
<td style="text-align: left;">BEN</td>
<td style="text-align: left;">African Region</td>
<td style="text-align: left;">2022-06-24</td>
<td style="text-align: right;">3</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">3</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
</tr>
<tr class="even">
<td style="text-align: left;">Benin</td>
<td style="text-align: left;">BEN</td>
<td style="text-align: left;">African Region</td>
<td style="text-align: left;">2022-07-01</td>
<td style="text-align: right;">3</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Benin</td>
<td style="text-align: left;">BEN</td>
<td style="text-align: left;">African Region</td>
<td style="text-align: left;">2022-07-08</td>
<td style="text-align: right;">3</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
</tr>
<tr class="even">
<td style="text-align: left;">Benin</td>
<td style="text-align: left;">BEN</td>
<td style="text-align: left;">African Region</td>
<td style="text-align: left;">2022-07-15</td>
<td style="text-align: right;">3</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Benin</td>
<td style="text-align: left;">BEN</td>
<td style="text-align: left;">African Region</td>
<td style="text-align: left;">2022-07-22</td>
<td style="text-align: right;">3</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
</tr>
<tr class="even">
<td style="text-align: left;">Benin</td>
<td style="text-align: left;">BEN</td>
<td style="text-align: left;">African Region</td>
<td style="text-align: left;">2022-07-29</td>
<td style="text-align: right;">3</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
</tr>
</tbody>
</table>
</div>
</div>
</div>
<p>The total number of confirmed cases, probable cases, and deaths worldwide can easily be tabulated.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb3"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a><span class="co"># extract total cases by country</span></span>
<span id="cb3-2"><a href="#cb3-2" aria-hidden="true" tabindex="-1"></a>agg_total <span class="ot">&lt;-</span> agg <span class="sc">|&gt;</span> </span>
<span id="cb3-3"><a href="#cb3-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(country) <span class="sc">|&gt;</span> </span>
<span id="cb3-4"><a href="#cb3-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">slice_max</span>(date) <span class="sc">|&gt;</span> </span>
<span id="cb3-5"><a href="#cb3-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ungroup</span>() <span class="sc">|&gt;</span> </span>
<span id="cb3-6"><a href="#cb3-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(country, iso3, who_region, <span class="fu">starts_with</span>(<span class="st">"total"</span>)) <span class="sc">|&gt;</span> </span>
<span id="cb3-7"><a href="#cb3-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">arrange</span>(<span class="fu">desc</span>(total_confirmed_cases))</span>
<span id="cb3-8"><a href="#cb3-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-9"><a href="#cb3-9" aria-hidden="true" tabindex="-1"></a><span class="co"># calculate total cases, globally </span></span>
<span id="cb3-10"><a href="#cb3-10" aria-hidden="true" tabindex="-1"></a>agg_total <span class="sc">|&gt;</span> </span>
<span id="cb3-11"><a href="#cb3-11" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarize</span>(</span>
<span id="cb3-12"><a href="#cb3-12" aria-hidden="true" tabindex="-1"></a>    <span class="at">total_confirmed_cases =</span> <span class="fu">sum</span>(total_confirmed_cases),</span>
<span id="cb3-13"><a href="#cb3-13" aria-hidden="true" tabindex="-1"></a>    <span class="at">total_probable_cases =</span> <span class="fu">sum</span>(total_probable_cases),</span>
<span id="cb3-14"><a href="#cb3-14" aria-hidden="true" tabindex="-1"></a>    <span class="at">total_deaths =</span> <span class="fu">sum</span>(total_deaths)</span>
<span id="cb3-15"><a href="#cb3-15" aria-hidden="true" tabindex="-1"></a>  )</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div class="kable-table">
<table class="table table-sm table-striped small">
<thead>
<tr class="header">
<th style="text-align: right;">total_confirmed_cases</th>
<th style="text-align: right;">total_probable_cases</th>
<th style="text-align: right;">total_deaths</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: right;">93030</td>
<td style="text-align: right;">652</td>
<td style="text-align: right;">176</td>
</tr>
</tbody>
</table>
</div>
</div>
</div>
<p>The top 10 countries by number of confirmed cases are the United States of America (31,246), Brazil (10,967), Spain (7,752), France (4,171), Colombia (4,090), Mexico (4,078), the United Kingdom (3,875), Peru (3,812), Germany (3,800), and China<a href="#fn3" class="footnote-ref" id="fnref3" role="doc-noteref"><sup>3</sup></a> (2,025).</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb4"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb4-1"><a href="#cb4-1" aria-hidden="true" tabindex="-1"></a><span class="co"># total cases, top 10 countries</span></span>
<span id="cb4-2"><a href="#cb4-2" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(agg_total, <span class="dv">10</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div class="kable-table">
<table class="table table-sm table-striped small">
<colgroup>
<col style="width: 22%">
<col style="width: 4%">
<col style="width: 21%">
<col style="width: 20%">
<col style="width: 19%">
<col style="width: 11%">
</colgroup>
<thead>
<tr class="header">
<th style="text-align: left;">country</th>
<th style="text-align: left;">iso3</th>
<th style="text-align: left;">who_region</th>
<th style="text-align: right;">total_confirmed_cases</th>
<th style="text-align: right;">total_probable_cases</th>
<th style="text-align: right;">total_deaths</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">United States of America</td>
<td style="text-align: left;">USA</td>
<td style="text-align: left;">Region of the Americas</td>
<td style="text-align: right;">31246</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">55</td>
</tr>
<tr class="even">
<td style="text-align: left;">Brazil</td>
<td style="text-align: left;">BRA</td>
<td style="text-align: left;">Region of the Americas</td>
<td style="text-align: right;">10967</td>
<td style="text-align: right;">349</td>
<td style="text-align: right;">16</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Spain</td>
<td style="text-align: left;">ESP</td>
<td style="text-align: left;">European Region</td>
<td style="text-align: right;">7752</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">3</td>
</tr>
<tr class="even">
<td style="text-align: left;">France</td>
<td style="text-align: left;">FRA</td>
<td style="text-align: left;">European Region</td>
<td style="text-align: right;">4171</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Colombia</td>
<td style="text-align: left;">COL</td>
<td style="text-align: left;">Region of the Americas</td>
<td style="text-align: right;">4090</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
</tr>
<tr class="even">
<td style="text-align: left;">Mexico</td>
<td style="text-align: left;">MEX</td>
<td style="text-align: left;">Region of the Americas</td>
<td style="text-align: right;">4078</td>
<td style="text-align: right;">52</td>
<td style="text-align: right;">34</td>
</tr>
<tr class="odd">
<td style="text-align: left;">The United Kingdom</td>
<td style="text-align: left;">GBR</td>
<td style="text-align: left;">European Region</td>
<td style="text-align: right;">3875</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
</tr>
<tr class="even">
<td style="text-align: left;">Peru</td>
<td style="text-align: left;">PER</td>
<td style="text-align: left;">Region of the Americas</td>
<td style="text-align: right;">3812</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">20</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Germany</td>
<td style="text-align: left;">DEU</td>
<td style="text-align: left;">European Region</td>
<td style="text-align: right;">3800</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
</tr>
<tr class="even">
<td style="text-align: left;">China</td>
<td style="text-align: left;">CHN</td>
<td style="text-align: left;">Western Pacific Region</td>
<td style="text-align: right;">2025</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">1</td>
</tr>
</tbody>
</table>
</div>
</div>
</div>
<p>As of 31 December 2023, mpox cases have been reported by 117 WHO Member States across all six WHO regions. The dataset contains cases reported between 7 January 2022 to 31 December 2023.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb5"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb5-1"><a href="#cb5-1" aria-hidden="true" tabindex="-1"></a><span class="co"># number of countries</span></span>
<span id="cb5-2"><a href="#cb5-2" aria-hidden="true" tabindex="-1"></a><span class="fu">unique</span>(agg<span class="sc">$</span>country) <span class="sc">|&gt;</span> <span class="fu">length</span>()</span>
<span id="cb5-3"><a href="#cb5-3" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [1] 117</span></span>
<span id="cb5-4"><a href="#cb5-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-5"><a href="#cb5-5" aria-hidden="true" tabindex="-1"></a><span class="co"># number of WHO regions</span></span>
<span id="cb5-6"><a href="#cb5-6" aria-hidden="true" tabindex="-1"></a><span class="fu">unique</span>(agg<span class="sc">$</span>who_region) <span class="sc">|&gt;</span> <span class="fu">length</span>()</span>
<span id="cb5-7"><a href="#cb5-7" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [1] 6</span></span>
<span id="cb5-8"><a href="#cb5-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-9"><a href="#cb5-9" aria-hidden="true" tabindex="-1"></a><span class="co"># date range</span></span>
<span id="cb5-10"><a href="#cb5-10" aria-hidden="true" tabindex="-1"></a><span class="fu">range</span>(agg<span class="sc">$</span>date)</span>
<span id="cb5-11"><a href="#cb5-11" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [1] "2022-01-07" "2023-12-31"</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>For this analysis, I will only consider confirmed cases. However, I do not expect this decision to greatly impact the results considering that probable cases only make up 0.7% of overall cases (652/93,682) and only eight countries report any probable cases. While Puerto Rico reports the highest proportion of probable cases at 42% of total cases (150/361), probable cases make up less than 5% of the remaining countries’ total cases.</p>
<div class="cell">
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="data-report_files/figure-html/agg-probable-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
<p>While WHO collects aggregated data on a daily basis, nearly all countries’ public health authorities report cases at a weekly frequency. As a result, it is more useful to aggregate cases by epidemic week. The epidemic curve below depicts the aggregated weekly number of cases by week reported.</p>
<div class="cell">
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="data-report_files/figure-html/agg-epicurve-overall-weekly-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
<p>While the global trend appears to have been quite coherent with the number of weekly cases peaking in July 2022, this disguises the fact that the trends in cases looked quite distinct at the WHO region-level.</p>
<div class="cell">
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="data-report_files/figure-html/agg-epicurve-regions-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
<p>Here we observe that there is substantial variation between the six WHO regions, with the Eastern Mediterranean Region, European Region, and Region of the Americas following a similar trend with cases peaking in summer/fall 2022, while cases in the South-East Asia Region and Western Pacific Region peak in summer/fall 2023. In contrast, cases reported by the African Region appear to be more uniformly distributed, reflecting the fact that mpox is endemic to certain areas of western and central Africa.</p>
</section>
<section id="detailed-case-data" class="level2">
<h2 class="anchored" data-anchor-id="detailed-case-data">Detailed case data</h2>
<p>In addition to aggregated case data, WHO also collects line list data where each row corresponds with an individual case and contains information on demographics, clinical presentation, epidemiological exposure factors, and laboratory testing.<a href="#fn4" class="footnote-ref" id="fnref4" role="doc-noteref"><sup>4</sup></a> Due to privacy concerns, line list data is stripped of all personally identifiable information and aggregated by country and date before being made available by WHO.<a href="#fn5" class="footnote-ref" id="fnref5" role="doc-noteref"><sup>5</sup></a> In contrast to aggregated case data, the <code>date</code> variable of the detailed case dataset corresponds with either the date of symptom onset, the date of diagnosis (if date of symptom onset is not available), or the date of reporting (if date of symptom onset and date of diagnosis are not available).<a href="#fn6" class="footnote-ref" id="fnref6" role="doc-noteref"><sup>6</sup></a> This difference in how cases are assigned to a date grants us a much more granular view of countries’ epidemic curves, as shown below. Dates are aggregated at the weekly level to further protect individual cases’ privacy.</p>
<p>The detailed dataset consists of the following variables:</p>
<ul>
<li><p><code>country</code>: The country, area, or territory in which a given case was reported. Note that this does not necessarily correspond with the location where the patient was infected.</p></li>
<li><p><code>iso3</code>: Three-letter country codes corresponding with a country, area, or territory.</p></li>
<li><p><code>who_region</code>: Regions into which each country, area, or territory has been assigned by WHO. There are six regions: African Region, Region of the Americas, Eastern Mediterranean Region, European Region, South-East Asian Region, and Western Pacific Region.<a href="#fn7" class="footnote-ref" id="fnref7" role="doc-noteref"><sup>7</sup></a></p></li>
<li><p><code>date</code>: The date of symptom onset, the date of diagnosis (if date of symptom onset is not available), or the date of reporting (if date of symptom onset and date of diagnosis are not available).<a href="#fn8" class="footnote-ref" id="fnref8" role="doc-noteref"><sup>8</sup></a></p></li>
<li><p><code>date_type</code>: One of the following: “Onset”, “Diagnosis”, or “Reported”.</p></li>
<li><p><code>cases</code>: The number of new confirmed cases on a given date.</p></li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb6"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb6-1"><a href="#cb6-1" aria-hidden="true" tabindex="-1"></a><span class="co"># line list data</span></span>
<span id="cb6-2"><a href="#cb6-2" aria-hidden="true" tabindex="-1"></a>ll <span class="ot">&lt;-</span> <span class="fu">read_csv</span>(<span class="fu">here</span>(<span class="st">"data/WHO/Country data by date of symptom onset.csv"</span>)) <span class="sc">|&gt;</span> </span>
<span id="cb6-3"><a href="#cb6-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(<span class="sc">-</span>who_region) <span class="sc">|&gt;</span> </span>
<span id="cb6-4"><a href="#cb6-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">rename</span>(</span>
<span id="cb6-5"><a href="#cb6-5" aria-hidden="true" tabindex="-1"></a>    <span class="at">who_region =</span> who_region_long, </span>
<span id="cb6-6"><a href="#cb6-6" aria-hidden="true" tabindex="-1"></a>    <span class="at">date =</span> reference_date</span>
<span id="cb6-7"><a href="#cb6-7" aria-hidden="true" tabindex="-1"></a>    ) <span class="sc">|&gt;</span> </span>
<span id="cb6-8"><a href="#cb6-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(<span class="fu">between</span>(date, <span class="fu">as_date</span>(<span class="st">"2022-01-01"</span>), <span class="fu">as_date</span>(<span class="st">"2023-12-31"</span>)) <span class="sc">|</span> <span class="fu">is.na</span>(date)) <span class="sc">|&gt;</span></span>
<span id="cb6-9"><a href="#cb6-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">date_type =</span> <span class="fu">factor</span>(date_type, <span class="at">levels =</span> <span class="fu">c</span>(<span class="st">"Onset"</span>, <span class="st">"Diagnosis"</span>, <span class="st">"Reported"</span>)))</span>
<span id="cb6-10"><a href="#cb6-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-11"><a href="#cb6-11" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(ll)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div class="kable-table">
<table class="table table-sm table-striped small">
<thead>
<tr class="header">
<th style="text-align: left;">country</th>
<th style="text-align: left;">iso3</th>
<th style="text-align: left;">who_region</th>
<th style="text-align: left;">date</th>
<th style="text-align: left;">date_type</th>
<th style="text-align: right;">cases</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">Andorra</td>
<td style="text-align: left;">AND</td>
<td style="text-align: left;">European Region</td>
<td style="text-align: left;">2022-06-23</td>
<td style="text-align: left;">Onset</td>
<td style="text-align: right;">2</td>
</tr>
<tr class="even">
<td style="text-align: left;">Andorra</td>
<td style="text-align: left;">AND</td>
<td style="text-align: left;">European Region</td>
<td style="text-align: left;">2022-07-07</td>
<td style="text-align: left;">Onset</td>
<td style="text-align: right;">1</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Andorra</td>
<td style="text-align: left;">AND</td>
<td style="text-align: left;">European Region</td>
<td style="text-align: left;">2022-07-14</td>
<td style="text-align: left;">Onset</td>
<td style="text-align: right;">1</td>
</tr>
<tr class="even">
<td style="text-align: left;">Argentina</td>
<td style="text-align: left;">ARG</td>
<td style="text-align: left;">Region of the Americas</td>
<td style="text-align: left;">2022-05-05</td>
<td style="text-align: left;">Onset</td>
<td style="text-align: right;">1</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Argentina</td>
<td style="text-align: left;">ARG</td>
<td style="text-align: left;">Region of the Americas</td>
<td style="text-align: left;">2022-05-12</td>
<td style="text-align: left;">Onset</td>
<td style="text-align: right;">1</td>
</tr>
<tr class="even">
<td style="text-align: left;">Argentina</td>
<td style="text-align: left;">ARG</td>
<td style="text-align: left;">Region of the Americas</td>
<td style="text-align: left;">2022-05-26</td>
<td style="text-align: left;">Onset</td>
<td style="text-align: right;">1</td>
</tr>
</tbody>
</table>
</div>
</div>
</div>
<p>A significant disadvantage of this detailed dataset is that it only contains information 63% for all reported mpox cases (58,883/93,030). This is driven almost entirely by the fact that WHO no longer includes cases from the United States in this dataset, despite the fact that the United States represents 34% of global cases (31,246/93,030). That said, this data can still be useful for analysis of other countries. As such, detailed dataset can complement the aggregated data presented above.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb7"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb7-1"><a href="#cb7-1" aria-hidden="true" tabindex="-1"></a><span class="co"># calculate total cases by country</span></span>
<span id="cb7-2"><a href="#cb7-2" aria-hidden="true" tabindex="-1"></a>ll_total <span class="ot">&lt;-</span> ll <span class="sc">|&gt;</span> </span>
<span id="cb7-3"><a href="#cb7-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(country) <span class="sc">|&gt;</span> </span>
<span id="cb7-4"><a href="#cb7-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarize</span>(<span class="at">total_confirmed_cases =</span> <span class="fu">sum</span>(cases)) <span class="sc">|&gt;</span> </span>
<span id="cb7-5"><a href="#cb7-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ungroup</span>() <span class="sc">|&gt;</span> </span>
<span id="cb7-6"><a href="#cb7-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">arrange</span>(<span class="fu">desc</span>(total_confirmed_cases))</span>
<span id="cb7-7"><a href="#cb7-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-8"><a href="#cb7-8" aria-hidden="true" tabindex="-1"></a><span class="co"># calculate total cases, globally</span></span>
<span id="cb7-9"><a href="#cb7-9" aria-hidden="true" tabindex="-1"></a>ll_total <span class="sc">|&gt;</span> </span>
<span id="cb7-10"><a href="#cb7-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarize</span>(<span class="at">total_confirmed_cases =</span> <span class="fu">sum</span>(total_confirmed_cases)) <span class="sc">|&gt;</span> </span>
<span id="cb7-11"><a href="#cb7-11" aria-hidden="true" tabindex="-1"></a>  <span class="fu">pull</span>(total_confirmed_cases)</span>
<span id="cb7-12"><a href="#cb7-12" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [1] 58833</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>As of 31 December 2023, detailed mpox case data has been provided by 101 WHO Member States across all six WHO regions. The dataset contains cases from the period of 6 January 2022 to 28 December 2023.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb8"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb8-1"><a href="#cb8-1" aria-hidden="true" tabindex="-1"></a><span class="co"># countries</span></span>
<span id="cb8-2"><a href="#cb8-2" aria-hidden="true" tabindex="-1"></a><span class="fu">unique</span>(ll<span class="sc">$</span>country) <span class="sc">|&gt;</span> <span class="fu">length</span>()</span>
<span id="cb8-3"><a href="#cb8-3" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [1] 101</span></span>
<span id="cb8-4"><a href="#cb8-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb8-5"><a href="#cb8-5" aria-hidden="true" tabindex="-1"></a><span class="co"># WHO regions</span></span>
<span id="cb8-6"><a href="#cb8-6" aria-hidden="true" tabindex="-1"></a><span class="fu">unique</span>(ll<span class="sc">$</span>who_region) <span class="sc">|&gt;</span> <span class="fu">length</span>()</span>
<span id="cb8-7"><a href="#cb8-7" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [1] 6</span></span>
<span id="cb8-8"><a href="#cb8-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb8-9"><a href="#cb8-9" aria-hidden="true" tabindex="-1"></a><span class="co"># date range</span></span>
<span id="cb8-10"><a href="#cb8-10" aria-hidden="true" tabindex="-1"></a><span class="fu">range</span>(ll<span class="sc">$</span>date)</span>
<span id="cb8-11"><a href="#cb8-11" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [1] "2022-01-06" "2023-12-28"</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>While WHO collects line list data on a daily basis, this data is aggregated by epidemic week to safeguard the privacy of individual cases. The epidemic curve below depicts the weekly number of cases. Compared to the epidemic curves produced using aggregated data, the detailed data allows us to plot much smoother curves which seem to adhere more closely to the trend we might expect of an infectious disease outbreak.</p>
<div class="cell">
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="data-report_files/figure-html/ll-epicurve-overall-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
<p>Again, while the global trend appears to have been quite coherent with the number of weekly cases peaking in July 2022, the trends vary at the WHO region-level.</p>
<div class="cell">
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="data-report_files/figure-html/ll-epicurve-regions-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
</section>
</section>
<section id="wikipedia-data" class="level1">
<h1>Wikipedia Data</h1>
<p>The Wikimedia Foundation makes it straightforward to access various analytics data related to its projects, including Wikipedia, by providing the <a href="https://wikitech.wikimedia.org/wiki/Data_Engineering/Systems/AQS">Wikimedia Analytics Query Service (AQS)</a> <a href="https://wikimedia.org/api/rest_v1/">REST API</a>. AQS offers a range of analytics data, such as page view statistics, editor activity levels, and other traffic data from as far back as 1 August 2015. The REST API facilitates the retrieval of analytics data from Wikipedia in a structured way. Given that Wikipedia data is abundant, publicly accessible, and commonly used, many resources exist to easily access this data.<a href="#fn9" class="footnote-ref" id="fnref9" role="doc-noteref"><sup>9</sup></a> {<a href="https://wikimedia.github.io/waxer/">waxer</a>} is one such package which serves as a Wikimedia API wrapper that facilitates querying for traffic (pageviews, unique devices), user (e.g.&nbsp;active editors), and content-based metrics (e.g.&nbsp;edits counts, pages counts) from Wikimedia Analytics Query Service with R.</p>
<p>The first step of working with the {waxer} package involves defining the exact Wikipedia projects we are interested in.<a href="#fn10" class="footnote-ref" id="fnref10" role="doc-noteref"><sup>10</sup></a> I’ll use English Wikipedia to illustrate how the next steps work.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb9"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb9-1"><a href="#cb9-1" aria-hidden="true" tabindex="-1"></a><span class="co"># define projects</span></span>
<span id="cb9-2"><a href="#cb9-2" aria-hidden="true" tabindex="-1"></a>project <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">"en.wikipedia"</span>)</span>
<span id="cb9-3"><a href="#cb9-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-4"><a href="#cb9-4" aria-hidden="true" tabindex="-1"></a><span class="co"># define page names</span></span>
<span id="cb9-5"><a href="#cb9-5" aria-hidden="true" tabindex="-1"></a>page_names <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">"Monkeypox virus"</span>, <span class="st">"Mpox"</span>) </span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<section id="page-views" class="level2">
<h2 class="anchored" data-anchor-id="page-views">Page views</h2>
<p>Since this project is concerned with assessing public attention, Wikipedia page view statistics will serve as our primary measure for online information-seeking behavior. We query page view statistics from the AQS REST API using the following specifications:</p>
<ul>
<li><p><code>project</code>: The name of any Wikimedia project, for example en.wikipedia.</p></li>
<li><p><code>page_name</code>: The title of any article in the specified project.</p></li>
<li><p><code>access_method</code>: The method used to access the article. Options: “desktop”, “mobile app”, “mobile web”, or “all”.</p></li>
<li><p><code>agent_type</code>: The type of agent accessing the article. Options: “user”, “bot/spider”, “automated”, or “all”.</p></li>
<li><p><code>granularity</code>: The time unit for the response data. Options: “daily” or “monthly”.</p></li>
<li><p><code>start_date</code>: The date of the first day to include.</p></li>
<li><p><code>end_date</code>: The date of the last day to include.</p></li>
<li><p><code>include_redirects</code>: Whether instances in which a user was redirected to an article should count towards the total view count for the destination page. Redirects are usually created for common typos and aliases to make it easier for users to arrive at a single article.<a href="#fn11" class="footnote-ref" id="fnref11" role="doc-noteref"><sup>11</sup></a></p></li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb10"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb10-1"><a href="#cb10-1" aria-hidden="true" tabindex="-1"></a><span class="co"># query page views</span></span>
<span id="cb10-2"><a href="#cb10-2" aria-hidden="true" tabindex="-1"></a>pageviews <span class="ot">&lt;-</span> <span class="fu">wx_page_views</span>(</span>
<span id="cb10-3"><a href="#cb10-3" aria-hidden="true" tabindex="-1"></a>  <span class="at">project =</span> project,</span>
<span id="cb10-4"><a href="#cb10-4" aria-hidden="true" tabindex="-1"></a>  <span class="at">page_name =</span> page_names,</span>
<span id="cb10-5"><a href="#cb10-5" aria-hidden="true" tabindex="-1"></a>  <span class="at">access_method =</span> <span class="st">"all"</span>, <span class="co"># desktop + mobile </span></span>
<span id="cb10-6"><a href="#cb10-6" aria-hidden="true" tabindex="-1"></a>  <span class="at">agent_type =</span> <span class="st">"user"</span>, <span class="co"># human users</span></span>
<span id="cb10-7"><a href="#cb10-7" aria-hidden="true" tabindex="-1"></a>  <span class="at">granularity =</span> <span class="st">"daily"</span>, </span>
<span id="cb10-8"><a href="#cb10-8" aria-hidden="true" tabindex="-1"></a>  <span class="at">start_date =</span> <span class="st">"20220101"</span>, <span class="co"># 1 Jan 2022</span></span>
<span id="cb10-9"><a href="#cb10-9" aria-hidden="true" tabindex="-1"></a>  <span class="at">end_date =</span> <span class="st">"20231231"</span>, <span class="co"># 31 Dec 2023 </span></span>
<span id="cb10-10"><a href="#cb10-10" aria-hidden="true" tabindex="-1"></a>  <span class="at">include_redirects =</span> <span class="cn">TRUE</span></span>
<span id="cb10-11"><a href="#cb10-11" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb10-12"><a href="#cb10-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb10-13"><a href="#cb10-13" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(pageviews)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div class="kable-table">
<table class="table table-sm table-striped small">
<thead>
<tr class="header">
<th style="text-align: left;">project</th>
<th style="text-align: left;">page_name</th>
<th style="text-align: left;">redirect_name</th>
<th style="text-align: left;">date</th>
<th style="text-align: right;">views</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">en.wikipedia</td>
<td style="text-align: left;">Monkeypox virus</td>
<td style="text-align: left;">NA</td>
<td style="text-align: left;">2022-01-01</td>
<td style="text-align: right;">46</td>
</tr>
<tr class="even">
<td style="text-align: left;">en.wikipedia</td>
<td style="text-align: left;">Monkeypox virus</td>
<td style="text-align: left;">NA</td>
<td style="text-align: left;">2022-01-02</td>
<td style="text-align: right;">47</td>
</tr>
<tr class="odd">
<td style="text-align: left;">en.wikipedia</td>
<td style="text-align: left;">Monkeypox virus</td>
<td style="text-align: left;">NA</td>
<td style="text-align: left;">2022-01-03</td>
<td style="text-align: right;">260</td>
</tr>
<tr class="even">
<td style="text-align: left;">en.wikipedia</td>
<td style="text-align: left;">Monkeypox virus</td>
<td style="text-align: left;">NA</td>
<td style="text-align: left;">2022-01-04</td>
<td style="text-align: right;">103</td>
</tr>
<tr class="odd">
<td style="text-align: left;">en.wikipedia</td>
<td style="text-align: left;">Monkeypox virus</td>
<td style="text-align: left;">NA</td>
<td style="text-align: left;">2022-01-05</td>
<td style="text-align: right;">55</td>
</tr>
<tr class="even">
<td style="text-align: left;">en.wikipedia</td>
<td style="text-align: left;">Monkeypox virus</td>
<td style="text-align: left;">NA</td>
<td style="text-align: left;">2022-01-06</td>
<td style="text-align: right;">43</td>
</tr>
</tbody>
</table>
</div>
</div>
</div>
<p>We start exploring the dataset by examining the absolute and relative frequency of different values within the <code>project</code> and <code>page_name</code> variables. As expected, all page views are for the English Wikipedia project. Notably, the “Mpox” article has a substantially higher traffic volume than the “Monkeypox virus” article (71% vs.&nbsp;29%).</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb11"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb11-1"><a href="#cb11-1" aria-hidden="true" tabindex="-1"></a><span class="co"># frequency of projects and page names</span></span>
<span id="cb11-2"><a href="#cb11-2" aria-hidden="true" tabindex="-1"></a>pageviews[<span class="dv">1</span><span class="sc">:</span><span class="dv">2</span>] <span class="sc">|&gt;</span> </span>
<span id="cb11-3"><a href="#cb11-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">map</span>(<span class="sc">~</span> <span class="fu">tabyl</span>(.x)) <span class="sc">|&gt;</span> </span>
<span id="cb11-4"><a href="#cb11-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">set_names</span>(<span class="fu">names</span>(pageviews[<span class="dv">1</span><span class="sc">:</span><span class="dv">2</span>]))</span>
<span id="cb11-5"><a href="#cb11-5" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; $project</span></span>
<span id="cb11-6"><a href="#cb11-6" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;            .x    n percent</span></span>
<span id="cb11-7"><a href="#cb11-7" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  en.wikipedia 4229       1</span></span>
<span id="cb11-8"><a href="#cb11-8" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; </span></span>
<span id="cb11-9"><a href="#cb11-9" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; $page_name</span></span>
<span id="cb11-10"><a href="#cb11-10" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;               .x    n   percent</span></span>
<span id="cb11-11"><a href="#cb11-11" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  Monkeypox virus 1235 0.2920312</span></span>
<span id="cb11-12"><a href="#cb11-12" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;             Mpox 2994 0.7079688</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Next, we explore the missingness of each of variable in the <code>pageviews</code> dataset. We find that <code>redirect_name</code> is the only column missing values. For the specified Wikipedia project and articles, 27% of page views were redirected from other search terms.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb12"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb12-1"><a href="#cb12-1" aria-hidden="true" tabindex="-1"></a><span class="co"># % missing by column</span></span>
<span id="cb12-2"><a href="#cb12-2" aria-hidden="true" tabindex="-1"></a>pageviews <span class="sc">|&gt;</span> </span>
<span id="cb12-3"><a href="#cb12-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">map_df</span>(<span class="sc">~</span><span class="fu">sum</span>(<span class="fu">is.na</span>(.)<span class="sc">/</span><span class="fu">length</span>(.)) <span class="sc">*</span> <span class="dv">100</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div class="kable-table">
<table class="table table-sm table-striped small">
<thead>
<tr class="header">
<th style="text-align: right;">project</th>
<th style="text-align: right;">page_name</th>
<th style="text-align: right;">redirect_name</th>
<th style="text-align: right;">date</th>
<th style="text-align: right;">views</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">27.28777</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
</tr>
</tbody>
</table>
</div>
</div>
</div>
<p>Seeing as a substantial number of page views are driven by redirects, it is important to understand whether it is valid to include these redirects in our analysis. If search terms appear related to mpox or the monkeypox virus, then it is safe to assume that this represents online information-seeking behavior towards our topic. Our table shows that all search appear to directly relate to mpox or the monkeypox virus, so we conclude that is valid to include redirects in this analysis. This will be reevaluated and handled as more projects and articles are added to the analysis.</p>
<div class="cell">
<div class="cell-output-display">
<div id="zatcgbljye" style="padding-left:0px;padding-right:0px;padding-top:10px;padding-bottom:10px;overflow-x:auto;overflow-y:auto;width:auto;height:auto;">
<style>#zatcgbljye table {
  font-family: system-ui, 'Segoe UI', Roboto, Helvetica, Arial, sans-serif, 'Apple Color Emoji', 'Segoe UI Emoji', 'Segoe UI Symbol', 'Noto Color Emoji';
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
}

#zatcgbljye thead, #zatcgbljye tbody, #zatcgbljye tfoot, #zatcgbljye tr, #zatcgbljye td, #zatcgbljye th {
  border-style: none;
}

#zatcgbljye p {
  margin: 0;
  padding: 0;
}

#zatcgbljye .gt_table {
  display: table;
  border-collapse: collapse;
  line-height: normal;
  margin-left: auto;
  margin-right: auto;
  color: #333333;
  font-size: 16px;
  font-weight: normal;
  font-style: normal;
  background-color: #FFFFFF;
  width: auto;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #A8A8A8;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #A8A8A8;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
}

#zatcgbljye .gt_caption {
  padding-top: 4px;
  padding-bottom: 4px;
}

#zatcgbljye .gt_title {
  color: #333333;
  font-size: 125%;
  font-weight: initial;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-color: #FFFFFF;
  border-bottom-width: 0;
}

#zatcgbljye .gt_subtitle {
  color: #333333;
  font-size: 85%;
  font-weight: initial;
  padding-top: 3px;
  padding-bottom: 5px;
  padding-left: 5px;
  padding-right: 5px;
  border-top-color: #FFFFFF;
  border-top-width: 0;
}

#zatcgbljye .gt_heading {
  background-color: #FFFFFF;
  text-align: center;
  border-bottom-color: #FFFFFF;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
}

#zatcgbljye .gt_bottom_border {
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#zatcgbljye .gt_col_headings {
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
}

#zatcgbljye .gt_col_heading {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: normal;
  text-transform: inherit;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: bottom;
  padding-top: 5px;
  padding-bottom: 6px;
  padding-left: 5px;
  padding-right: 5px;
  overflow-x: hidden;
}

#zatcgbljye .gt_column_spanner_outer {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: normal;
  text-transform: inherit;
  padding-top: 0;
  padding-bottom: 0;
  padding-left: 4px;
  padding-right: 4px;
}

#zatcgbljye .gt_column_spanner_outer:first-child {
  padding-left: 0;
}

#zatcgbljye .gt_column_spanner_outer:last-child {
  padding-right: 0;
}

#zatcgbljye .gt_column_spanner {
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  vertical-align: bottom;
  padding-top: 5px;
  padding-bottom: 5px;
  overflow-x: hidden;
  display: inline-block;
  width: 100%;
}

#zatcgbljye .gt_spanner_row {
  border-bottom-style: hidden;
}

#zatcgbljye .gt_group_heading {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: middle;
  text-align: left;
}

#zatcgbljye .gt_empty_group_heading {
  padding: 0.5px;
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  vertical-align: middle;
}

#zatcgbljye .gt_from_md > :first-child {
  margin-top: 0;
}

#zatcgbljye .gt_from_md > :last-child {
  margin-bottom: 0;
}

#zatcgbljye .gt_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  margin: 10px;
  border-top-style: solid;
  border-top-width: 1px;
  border-top-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: middle;
  overflow-x: hidden;
}

#zatcgbljye .gt_stub {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-right-style: solid;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  padding-left: 5px;
  padding-right: 5px;
}

#zatcgbljye .gt_stub_row_group {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-right-style: solid;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  padding-left: 5px;
  padding-right: 5px;
  vertical-align: top;
}

#zatcgbljye .gt_row_group_first td {
  border-top-width: 2px;
}

#zatcgbljye .gt_row_group_first th {
  border-top-width: 2px;
}

#zatcgbljye .gt_summary_row {
  color: #333333;
  background-color: #FFFFFF;
  text-transform: inherit;
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
}

#zatcgbljye .gt_first_summary_row {
  border-top-style: solid;
  border-top-color: #D3D3D3;
}

#zatcgbljye .gt_first_summary_row.thick {
  border-top-width: 2px;
}

#zatcgbljye .gt_last_summary_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#zatcgbljye .gt_grand_summary_row {
  color: #333333;
  background-color: #FFFFFF;
  text-transform: inherit;
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
}

#zatcgbljye .gt_first_grand_summary_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-top-style: double;
  border-top-width: 6px;
  border-top-color: #D3D3D3;
}

#zatcgbljye .gt_last_grand_summary_row_top {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-style: double;
  border-bottom-width: 6px;
  border-bottom-color: #D3D3D3;
}

#zatcgbljye .gt_striped {
  background-color: rgba(128, 128, 128, 0.05);
}

#zatcgbljye .gt_table_body {
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#zatcgbljye .gt_footnotes {
  color: #333333;
  background-color: #FFFFFF;
  border-bottom-style: none;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
}

#zatcgbljye .gt_footnote {
  margin: 0px;
  font-size: 90%;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
}

#zatcgbljye .gt_sourcenotes {
  color: #333333;
  background-color: #FFFFFF;
  border-bottom-style: none;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
}

#zatcgbljye .gt_sourcenote {
  font-size: 90%;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
}

#zatcgbljye .gt_left {
  text-align: left;
}

#zatcgbljye .gt_center {
  text-align: center;
}

#zatcgbljye .gt_right {
  text-align: right;
  font-variant-numeric: tabular-nums;
}

#zatcgbljye .gt_font_normal {
  font-weight: normal;
}

#zatcgbljye .gt_font_bold {
  font-weight: bold;
}

#zatcgbljye .gt_font_italic {
  font-style: italic;
}

#zatcgbljye .gt_super {
  font-size: 65%;
}

#zatcgbljye .gt_footnote_marks {
  font-size: 75%;
  vertical-align: 0.4em;
  position: initial;
}

#zatcgbljye .gt_asterisk {
  font-size: 100%;
  vertical-align: 0;
}

#zatcgbljye .gt_indent_1 {
  text-indent: 5px;
}

#zatcgbljye .gt_indent_2 {
  text-indent: 10px;
}

#zatcgbljye .gt_indent_3 {
  text-indent: 15px;
}

#zatcgbljye .gt_indent_4 {
  text-indent: 20px;
}

#zatcgbljye .gt_indent_5 {
  text-indent: 25px;
}
</style>

<table class="gt_table table table-sm table-striped small" data-quarto-postprocess="true" data-quarto-disable-processing="false" data-quarto-bootstrap="false">
<thead>
<tr class="header gt_heading">
<th colspan="3" class="gt_heading gt_title gt_font_normal">Redirects for user views</th>
</tr>
<tr class="odd gt_heading">
<th colspan="3" class="gt_heading gt_subtitle gt_font_normal gt_bottom_border">English Wikipedia</th>
</tr>
<tr class="header gt_col_headings gt_spanner_row">
<th rowspan="2" id="Redirected search" class="gt_col_heading gt_columns_bottom_border gt_left" data-quarto-table-cell-role="th" scope="col">Redirected search</th>
<th colspan="2" id="Articles" class="gt_center gt_columns_top_border gt_column_spanner_outer" data-quarto-table-cell-role="th" scope="colgroup"><span class="gt_column_spanner">Articles</span></th>
</tr>
<tr class="odd gt_col_headings">
<th id="Monkeypox virus" class="gt_col_heading gt_columns_bottom_border gt_right" data-quarto-table-cell-role="th" scope="col">Monkeypox virus</th>
<th id="Mpox" class="gt_col_heading gt_columns_bottom_border gt_right" data-quarto-table-cell-role="th" scope="col">Mpox</th>
</tr>
</thead>
<tbody class="gt_table_body">
<tr class="odd">
<td class="gt_row gt_left" headers="redirect_name">HMPX</td>
<td class="gt_row gt_right" headers="Monkeypox virus" style="background-color: #FFFFFF; color: #000000">0</td>
<td class="gt_row gt_right" headers="Mpox" style="background-color: #FFFBFA; color: #000000">15</td>
</tr>
<tr class="even">
<td class="gt_row gt_left" headers="redirect_name">HMPXV</td>
<td class="gt_row gt_right" headers="Monkeypox virus" style="background-color: #FFECE5; color: #000000">74</td>
<td class="gt_row gt_right" headers="Mpox" style="background-color: #FFFFFF; color: #000000">0</td>
</tr>
<tr class="odd">
<td class="gt_row gt_left" headers="redirect_name">Human monkeypox</td>
<td class="gt_row gt_right" headers="Monkeypox virus" style="background-color: #FFFFFF; color: #000000">0</td>
<td class="gt_row gt_right" headers="Mpox" style="background-color: #FF7B5A; color: #000000">486</td>
</tr>
<tr class="even">
<td class="gt_row gt_left" headers="redirect_name">Moneypox</td>
<td class="gt_row gt_right" headers="Monkeypox virus" style="background-color: #FFFFFF; color: #000000">0</td>
<td class="gt_row gt_right" headers="Mpox" style="background-color: #FFE3D8; color: #000000">109</td>
</tr>
<tr class="odd">
<td class="gt_row gt_left" headers="redirect_name">Moneypox virus</td>
<td class="gt_row gt_right" headers="Monkeypox virus" style="background-color: #FFEDE6; color: #000000">69</td>
<td class="gt_row gt_right" headers="Mpox" style="background-color: #FFFFFF; color: #000000">0</td>
</tr>
<tr class="even">
<td class="gt_row gt_left" headers="redirect_name">Monkey pox</td>
<td class="gt_row gt_right" headers="Monkeypox virus" style="background-color: #FFFFFF; color: #000000">0</td>
<td class="gt_row gt_right" headers="Mpox" style="background-color: #FF1C0A; color: #FFFFFF">711</td>
</tr>
<tr class="odd">
<td class="gt_row gt_left" headers="redirect_name">Monkey Pox</td>
<td class="gt_row gt_right" headers="Monkeypox virus" style="background-color: #FFFFFF; color: #000000">0</td>
<td class="gt_row gt_right" headers="Mpox" style="background-color: #FF8F70; color: #000000">417</td>
</tr>
<tr class="even">
<td class="gt_row gt_left" headers="redirect_name">Monkeypox</td>
<td class="gt_row gt_right" headers="Monkeypox virus" style="background-color: #FFFFFF; color: #000000">0</td>
<td class="gt_row gt_right" headers="Mpox" style="background-color: #FF0000; color: #FFFFFF">730</td>
</tr>
<tr class="odd">
<td class="gt_row gt_left" headers="redirect_name">Monkeypox virus (MPV)</td>
<td class="gt_row gt_right" headers="Monkeypox virus" style="background-color: #FFF0EA; color: #000000">58</td>
<td class="gt_row gt_right" headers="Mpox" style="background-color: #FFFFFF; color: #000000">0</td>
</tr>
<tr class="even">
<td class="gt_row gt_left" headers="redirect_name">Monkeypox virus (MPXV)</td>
<td class="gt_row gt_right" headers="Monkeypox virus" style="background-color: #FFFDFC; color: #000000">9</td>
<td class="gt_row gt_right" headers="Mpox" style="background-color: #FFFFFF; color: #000000">0</td>
</tr>
<tr class="odd">
<td class="gt_row gt_left" headers="redirect_name">MPOX</td>
<td class="gt_row gt_right" headers="Monkeypox virus" style="background-color: #FFFFFF; color: #000000">0</td>
<td class="gt_row gt_right" headers="Mpox" style="background-color: #FFE4DB; color: #000000">102</td>
</tr>
<tr class="even">
<td class="gt_row gt_left" headers="redirect_name">Mpox virus</td>
<td class="gt_row gt_right" headers="Monkeypox virus" style="background-color: #FFD9CB; color: #000000">147</td>
<td class="gt_row gt_right" headers="Mpox" style="background-color: #FFFFFF; color: #000000">0</td>
</tr>
<tr class="odd">
<td class="gt_row gt_left" headers="redirect_name">MPXV</td>
<td class="gt_row gt_right" headers="Monkeypox virus" style="background-color: #FFD8CB; color: #000000">148</td>
<td class="gt_row gt_right" headers="Mpox" style="background-color: #FFFFFF; color: #000000">0</td>
</tr>
</tbody>
</table>

</div>
</div>
</div>
<p>Considering that mpox case data is available at a weekly level of granularity, we aggregate page view data by week and plot the results below. We observer two large spikes, with the first centered on May 2022 when non-endemic countries began reporting mpox cases<a href="#fn12" class="footnote-ref" id="fnref12" role="doc-noteref"><sup>12</sup></a> and the second centered on late July 2022 when WHO declared mpox to be a Public Health Emergency of International Concern (PHEIC).<a href="#fn13" class="footnote-ref" id="fnref13" role="doc-noteref"><sup>13</sup></a> Other smaller peaks can be observed, although the general trend indicates that public attention decreases over time.</p>
<div class="cell">
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="data-report_files/figure-html/pageviews-plot-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
</section>
<section id="project-views" class="level2">
<h2 class="anchored" data-anchor-id="project-views">Project views</h2>
<p>Another element of this project involves developing a baseline for what online information-seeking behavior may have looked like in the absence of the mpox outbreak, as measured by Wikipedia article access. For this, we will use overall project views for the respective Wikipedia projects to detect seasonality and long-term trends in Wikipedia search trends. To illustrate what this looks, we examine the Wikipedia projects corresponding with the most common languages in the top 10 countries by number of mpox cases.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb13"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb13-1"><a href="#cb13-1" aria-hidden="true" tabindex="-1"></a><span class="co"># list of wikipedia projects for languages used in top 10 countries</span></span>
<span id="cb13-2"><a href="#cb13-2" aria-hidden="true" tabindex="-1"></a>projects <span class="ot">&lt;-</span> <span class="fu">c</span>(</span>
<span id="cb13-3"><a href="#cb13-3" aria-hidden="true" tabindex="-1"></a>  <span class="st">"English"</span> <span class="ot">=</span> <span class="st">"en.wikipedia"</span>, <span class="co"># USA, UK</span></span>
<span id="cb13-4"><a href="#cb13-4" aria-hidden="true" tabindex="-1"></a>  <span class="st">"Portuguese"</span> <span class="ot">=</span> <span class="st">"pt.wikipedia"</span>, <span class="co"># Brazil</span></span>
<span id="cb13-5"><a href="#cb13-5" aria-hidden="true" tabindex="-1"></a>  <span class="st">"Spanish"</span> <span class="ot">=</span> <span class="st">"es.wikipedia"</span>, <span class="co"># Spain, Colombia, Mexico, Peru</span></span>
<span id="cb13-6"><a href="#cb13-6" aria-hidden="true" tabindex="-1"></a>  <span class="st">"French"</span> <span class="ot">=</span> <span class="st">"fr.wikipedia"</span>, <span class="co"># France</span></span>
<span id="cb13-7"><a href="#cb13-7" aria-hidden="true" tabindex="-1"></a>  <span class="st">"German"</span> <span class="ot">=</span> <span class="st">"de.wikipedia"</span>, <span class="co"># Germany</span></span>
<span id="cb13-8"><a href="#cb13-8" aria-hidden="true" tabindex="-1"></a>  <span class="st">"Chinese"</span> <span class="ot">=</span> <span class="st">"zh.wikipedia"</span> <span class="co"># China</span></span>
<span id="cb13-9"><a href="#cb13-9" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb13-10"><a href="#cb13-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb13-11"><a href="#cb13-11" aria-hidden="true" tabindex="-1"></a><span class="co"># query page views for multiple projects</span></span>
<span id="cb13-12"><a href="#cb13-12" aria-hidden="true" tabindex="-1"></a>project_views <span class="ot">&lt;-</span> <span class="fu">map_dfr</span>(</span>
<span id="cb13-13"><a href="#cb13-13" aria-hidden="true" tabindex="-1"></a>  projects, </span>
<span id="cb13-14"><a href="#cb13-14" aria-hidden="true" tabindex="-1"></a>  wx_project_views,</span>
<span id="cb13-15"><a href="#cb13-15" aria-hidden="true" tabindex="-1"></a>  <span class="at">access_method =</span> <span class="st">"all"</span>, <span class="co"># desktop + mobile</span></span>
<span id="cb13-16"><a href="#cb13-16" aria-hidden="true" tabindex="-1"></a>  <span class="at">agent_type =</span> <span class="st">"user"</span>, <span class="co"># human users</span></span>
<span id="cb13-17"><a href="#cb13-17" aria-hidden="true" tabindex="-1"></a>  <span class="at">granularity =</span> <span class="st">"daily"</span>,</span>
<span id="cb13-18"><a href="#cb13-18" aria-hidden="true" tabindex="-1"></a>  <span class="at">start_date =</span> <span class="st">"20220101"</span>, <span class="co"># 1 Jan 2022</span></span>
<span id="cb13-19"><a href="#cb13-19" aria-hidden="true" tabindex="-1"></a>  <span class="at">end_date =</span> <span class="st">"20231231"</span>, <span class="co"># 31 Dec 2023</span></span>
<span id="cb13-20"><a href="#cb13-20" aria-hidden="true" tabindex="-1"></a>  <span class="at">.id =</span> <span class="st">"language"</span></span>
<span id="cb13-21"><a href="#cb13-21" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb13-22"><a href="#cb13-22" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb13-23"><a href="#cb13-23" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(project_views)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div class="kable-table">
<table class="table table-sm table-striped small">
<thead>
<tr class="header">
<th style="text-align: left;">language</th>
<th style="text-align: left;">project</th>
<th style="text-align: left;">date</th>
<th style="text-align: right;">views</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">English</td>
<td style="text-align: left;">en.wikipedia</td>
<td style="text-align: left;">2022-01-01</td>
<td style="text-align: right;">245105524</td>
</tr>
<tr class="even">
<td style="text-align: left;">English</td>
<td style="text-align: left;">en.wikipedia</td>
<td style="text-align: left;">2022-01-02</td>
<td style="text-align: right;">258663949</td>
</tr>
<tr class="odd">
<td style="text-align: left;">English</td>
<td style="text-align: left;">en.wikipedia</td>
<td style="text-align: left;">2022-01-03</td>
<td style="text-align: right;">247918961</td>
</tr>
<tr class="even">
<td style="text-align: left;">English</td>
<td style="text-align: left;">en.wikipedia</td>
<td style="text-align: left;">2022-01-04</td>
<td style="text-align: right;">238890676</td>
</tr>
<tr class="odd">
<td style="text-align: left;">English</td>
<td style="text-align: left;">en.wikipedia</td>
<td style="text-align: left;">2022-01-05</td>
<td style="text-align: right;">233786134</td>
</tr>
<tr class="even">
<td style="text-align: left;">English</td>
<td style="text-align: left;">en.wikipedia</td>
<td style="text-align: left;">2022-01-06</td>
<td style="text-align: right;">234572499</td>
</tr>
</tbody>
</table>
</div>
</div>
</div>
<p>The plot below shows that English Wikipedia predominates overall Wikipedia traffic, with weekly traffic levels for the other language projects clustered together well below.</p>
<div class="cell">
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="data-report_files/figure-html/project-views-plot-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
</section>
</section>
<section id="appendix" class="level1">
<h1>Appendix</h1>
<p>While this Data Report showcases the underlying data structure of Wikipedia page view statistics using as “Mpox” and “Monkeypox virus” articles as mere examples, there are many other articles related to mpox and its symptoms<a href="#fn14" class="footnote-ref" id="fnref14" role="doc-noteref"><sup>14</sup></a> that may also contribute to this analysis. Supplemental article titles are listed below. Since article titles have been recorded in English, the next step would be to cross-reference them with their corresponding titles for other Wikipedia projects.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb14"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb14-1"><a href="#cb14-1" aria-hidden="true" tabindex="-1"></a><span class="co"># mpox symptoms</span></span>
<span id="cb14-2"><a href="#cb14-2" aria-hidden="true" tabindex="-1"></a>page_names_symptoms <span class="ot">&lt;-</span> <span class="fu">c</span>(</span>
<span id="cb14-3"><a href="#cb14-3" aria-hidden="true" tabindex="-1"></a>  <span class="st">"Back pain"</span>,</span>
<span id="cb14-4"><a href="#cb14-4" aria-hidden="true" tabindex="-1"></a>  <span class="st">"Balanitis"</span>,</span>
<span id="cb14-5"><a href="#cb14-5" aria-hidden="true" tabindex="-1"></a>  <span class="st">"Chills"</span>,</span>
<span id="cb14-6"><a href="#cb14-6" aria-hidden="true" tabindex="-1"></a>  <span class="st">"Conjunctivitis"</span>,</span>
<span id="cb14-7"><a href="#cb14-7" aria-hidden="true" tabindex="-1"></a>  <span class="st">"Cough"</span>,</span>
<span id="cb14-8"><a href="#cb14-8" aria-hidden="true" tabindex="-1"></a>  <span class="st">"Diarrhea"</span>,</span>
<span id="cb14-9"><a href="#cb14-9" aria-hidden="true" tabindex="-1"></a>  <span class="st">"Edema"</span>,</span>
<span id="cb14-10"><a href="#cb14-10" aria-hidden="true" tabindex="-1"></a>  <span class="st">"Encephalitis"</span>,</span>
<span id="cb14-11"><a href="#cb14-11" aria-hidden="true" tabindex="-1"></a>  <span class="st">"Fatigue"</span>,</span>
<span id="cb14-12"><a href="#cb14-12" aria-hidden="true" tabindex="-1"></a>  <span class="st">"Fever"</span>,</span>
<span id="cb14-13"><a href="#cb14-13" aria-hidden="true" tabindex="-1"></a>  <span class="st">"Genital herpes"</span>,</span>
<span id="cb14-14"><a href="#cb14-14" aria-hidden="true" tabindex="-1"></a>  <span class="st">"Headache"</span>,</span>
<span id="cb14-15"><a href="#cb14-15" aria-hidden="true" tabindex="-1"></a>  <span class="st">"Lesion"</span>,</span>
<span id="cb14-16"><a href="#cb14-16" aria-hidden="true" tabindex="-1"></a>  <span class="st">"List of skin conditions"</span>,</span>
<span id="cb14-17"><a href="#cb14-17" aria-hidden="true" tabindex="-1"></a>  <span class="st">"Lymphadenopathy"</span>,</span>
<span id="cb14-18"><a href="#cb14-18" aria-hidden="true" tabindex="-1"></a>  <span class="st">"Myalgia"</span>,</span>
<span id="cb14-19"><a href="#cb14-19" aria-hidden="true" tabindex="-1"></a>  <span class="st">"Myocarditis"</span>,</span>
<span id="cb14-20"><a href="#cb14-20" aria-hidden="true" tabindex="-1"></a>  <span class="st">"Proctitis"</span>,</span>
<span id="cb14-21"><a href="#cb14-21" aria-hidden="true" tabindex="-1"></a>  <span class="st">"Rash"</span>,</span>
<span id="cb14-22"><a href="#cb14-22" aria-hidden="true" tabindex="-1"></a>  <span class="st">"Skin condition"</span>,</span>
<span id="cb14-23"><a href="#cb14-23" aria-hidden="true" tabindex="-1"></a>  <span class="st">"Sore throat"</span>,</span>
<span id="cb14-24"><a href="#cb14-24" aria-hidden="true" tabindex="-1"></a>  <span class="st">"Urethritis"</span>,</span>
<span id="cb14-25"><a href="#cb14-25" aria-hidden="true" tabindex="-1"></a>  <span class="st">"Vomiting"</span></span>
<span id="cb14-26"><a href="#cb14-26" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb14-27"><a href="#cb14-27" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb14-28"><a href="#cb14-28" aria-hidden="true" tabindex="-1"></a><span class="co"># 2022-2023 mpox outbreak</span></span>
<span id="cb14-29"><a href="#cb14-29" aria-hidden="true" tabindex="-1"></a>page_names_mpox <span class="ot">&lt;-</span> <span class="fu">c</span>(</span>
<span id="cb14-30"><a href="#cb14-30" aria-hidden="true" tabindex="-1"></a> <span class="st">"2003 Midwest monkeypox outbreak"</span>,</span>
<span id="cb14-31"><a href="#cb14-31" aria-hidden="true" tabindex="-1"></a> <span class="st">"2022–2023 mpox outbreak"</span>,</span>
<span id="cb14-32"><a href="#cb14-32" aria-hidden="true" tabindex="-1"></a> <span class="st">"2022–2023 mpox outbreak in Asia"</span>,</span>
<span id="cb14-33"><a href="#cb14-33" aria-hidden="true" tabindex="-1"></a> <span class="st">"2022–2023 mpox outbreak in Australia"</span>,</span>
<span id="cb14-34"><a href="#cb14-34" aria-hidden="true" tabindex="-1"></a> <span class="st">"2022–2023 mpox outbreak in Austria"</span>,</span>
<span id="cb14-35"><a href="#cb14-35" aria-hidden="true" tabindex="-1"></a> <span class="st">"2022–2023 mpox outbreak in Belgium"</span>,</span>
<span id="cb14-36"><a href="#cb14-36" aria-hidden="true" tabindex="-1"></a> <span class="st">"2022–2023 mpox outbreak in Brazil"</span>,</span>
<span id="cb14-37"><a href="#cb14-37" aria-hidden="true" tabindex="-1"></a> <span class="st">"2022–2023 mpox outbreak in Canada"</span>,</span>
<span id="cb14-38"><a href="#cb14-38" aria-hidden="true" tabindex="-1"></a> <span class="st">"2022–2023 mpox outbreak in Chile"</span>,</span>
<span id="cb14-39"><a href="#cb14-39" aria-hidden="true" tabindex="-1"></a> <span class="st">"2022–2023 mpox outbreak in Colombia"</span>,</span>
<span id="cb14-40"><a href="#cb14-40" aria-hidden="true" tabindex="-1"></a> <span class="st">"2022–2023 mpox outbreak in Europe"</span>,</span>
<span id="cb14-41"><a href="#cb14-41" aria-hidden="true" tabindex="-1"></a> <span class="st">"2022–2023 mpox outbreak in France"</span>,</span>
<span id="cb14-42"><a href="#cb14-42" aria-hidden="true" tabindex="-1"></a> <span class="st">"2022–2023 mpox outbreak in Germany"</span>,</span>
<span id="cb14-43"><a href="#cb14-43" aria-hidden="true" tabindex="-1"></a> <span class="st">"2022–2023 mpox outbreak in Ghana"</span>,</span>
<span id="cb14-44"><a href="#cb14-44" aria-hidden="true" tabindex="-1"></a> <span class="st">"2022–2023 mpox outbreak in India"</span>,</span>
<span id="cb14-45"><a href="#cb14-45" aria-hidden="true" tabindex="-1"></a> <span class="st">"2022–2023 mpox outbreak in Israel"</span>,</span>
<span id="cb14-46"><a href="#cb14-46" aria-hidden="true" tabindex="-1"></a> <span class="st">"2022–2023 mpox outbreak in Italy"</span>,</span>
<span id="cb14-47"><a href="#cb14-47" aria-hidden="true" tabindex="-1"></a> <span class="st">"2022–2023 mpox outbreak in Japan"</span>,</span>
<span id="cb14-48"><a href="#cb14-48" aria-hidden="true" tabindex="-1"></a> <span class="st">"2022–2023 mpox outbreak in Mexico"</span>,</span>
<span id="cb14-49"><a href="#cb14-49" aria-hidden="true" tabindex="-1"></a> <span class="st">"2022–2023 mpox outbreak in the Netherlands"</span>,</span>
<span id="cb14-50"><a href="#cb14-50" aria-hidden="true" tabindex="-1"></a> <span class="st">"2022–2023 mpox outbreak in North America"</span>,</span>
<span id="cb14-51"><a href="#cb14-51" aria-hidden="true" tabindex="-1"></a> <span class="st">"2022–2023 mpox outbreak in Peru"</span>,</span>
<span id="cb14-52"><a href="#cb14-52" aria-hidden="true" tabindex="-1"></a> <span class="st">"2022–2023 mpox outbreak in the Philippines"</span>,</span>
<span id="cb14-53"><a href="#cb14-53" aria-hidden="true" tabindex="-1"></a> <span class="st">"2022–2023 mpox outbreak in Portugal"</span>,</span>
<span id="cb14-54"><a href="#cb14-54" aria-hidden="true" tabindex="-1"></a> <span class="st">"2022–2023 mpox outbreak in the Republic of Ireland"</span>,</span>
<span id="cb14-55"><a href="#cb14-55" aria-hidden="true" tabindex="-1"></a> <span class="st">"2022–2023 mpox outbreak in Singapore"</span>,</span>
<span id="cb14-56"><a href="#cb14-56" aria-hidden="true" tabindex="-1"></a> <span class="st">"2022–2023 mpox outbreak in South Africa"</span>,</span>
<span id="cb14-57"><a href="#cb14-57" aria-hidden="true" tabindex="-1"></a> <span class="st">"2022–2023 mpox outbreak in South America"</span>,</span>
<span id="cb14-58"><a href="#cb14-58" aria-hidden="true" tabindex="-1"></a> <span class="st">"2022–2023 mpox outbreak in Spain"</span>,</span>
<span id="cb14-59"><a href="#cb14-59" aria-hidden="true" tabindex="-1"></a> <span class="st">"2022–2023 mpox outbreak in Switzerland"</span>,</span>
<span id="cb14-60"><a href="#cb14-60" aria-hidden="true" tabindex="-1"></a> <span class="st">"2022–2023 mpox outbreak in Taiwan"</span>,</span>
<span id="cb14-61"><a href="#cb14-61" aria-hidden="true" tabindex="-1"></a> <span class="st">"2022–2023 mpox outbreak in the United Kingdom"</span>,</span>
<span id="cb14-62"><a href="#cb14-62" aria-hidden="true" tabindex="-1"></a> <span class="st">"2022–2023 mpox outbreak in the United States"</span>,</span>
<span id="cb14-63"><a href="#cb14-63" aria-hidden="true" tabindex="-1"></a> <span class="st">"ACAM2000"</span>,</span>
<span id="cb14-64"><a href="#cb14-64" aria-hidden="true" tabindex="-1"></a> <span class="st">"Modified vaccinia Ankara"</span>,</span>
<span id="cb14-65"><a href="#cb14-65" aria-hidden="true" tabindex="-1"></a> <span class="st">"Monkeypox virus"</span>,</span>
<span id="cb14-66"><a href="#cb14-66" aria-hidden="true" tabindex="-1"></a> <span class="st">"Mpox"</span>,</span>
<span id="cb14-67"><a href="#cb14-67" aria-hidden="true" tabindex="-1"></a> <span class="st">"Mpox in Nigeria"</span>,</span>
<span id="cb14-68"><a href="#cb14-68" aria-hidden="true" tabindex="-1"></a> <span class="st">"Mpox in the Democratic Republic of the Congo"</span>,</span>
<span id="cb14-69"><a href="#cb14-69" aria-hidden="true" tabindex="-1"></a> <span class="st">"Orthopoxvirus"</span>,</span>
<span id="cb14-70"><a href="#cb14-70" aria-hidden="true" tabindex="-1"></a> <span class="st">"Poxviridae"</span>,</span>
<span id="cb14-71"><a href="#cb14-71" aria-hidden="true" tabindex="-1"></a> <span class="st">"Smallpox vaccine"</span>,</span>
<span id="cb14-72"><a href="#cb14-72" aria-hidden="true" tabindex="-1"></a> <span class="st">"Timeline of the 2022–2023 mpox outbreak"</span></span>
<span id="cb14-73"><a href="#cb14-73" aria-hidden="true" tabindex="-1"></a> )</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>


<div id="quarto-appendix" class="default"><section id="footnotes" class="footnotes footnotes-end-of-document" role="doc-endnotes"><h2 class="anchored quarto-appendix-heading">Footnotes</h2>

<ol>
<li id="fn1"><p>For more information on what constitutes a confirmed or probable case, please refer to WHO’s mpox case definitions: <a href="https://www.who.int/emergencies/outbreak-toolkit/disease-outbreak-toolboxes/mpox-outbreak-toolbox" class="uri">https://www.who.int/emergencies/outbreak-toolkit/disease-outbreak-toolboxes/mpox-outbreak-toolbox</a><a href="#fnref1" class="footnote-back" role="doc-backlink">↩︎</a></p></li>
<li id="fn2"><p><a href="https://en.wikipedia.org/wiki/List_of_WHO_regions" class="uri">https://en.wikipedia.org/wiki/List_of_WHO_regions</a><a href="#fnref2" class="footnote-back" role="doc-backlink">↩︎</a></p></li>
<li id="fn3"><p>Cases shown include those reported in mainland China (1,611), Taiwan (333), Hong Kong (80), and Macao (1).<a href="#fnref3" class="footnote-back" role="doc-backlink">↩︎</a></p></li>
<li id="fn4"><p><a href="https://www.who.int/publications/m/item/monkeypox-minimum-dataset-case-reporting-form-(crf)" class="uri">https://www.who.int/publications/m/item/monkeypox-minimum-dataset-case-reporting-form-(crf)</a><a href="#fnref4" class="footnote-back" role="doc-backlink">↩︎</a></p></li>
<li id="fn5"><p><a href="https://worldhealthorg.shinyapps.io/mpx_global/" class="uri">https://worldhealthorg.shinyapps.io/mpx_global/</a><a href="#fnref5" class="footnote-back" role="doc-backlink">↩︎</a></p></li>
<li id="fn6"><p><a href="https://worldhealthorg.shinyapps.io/mpx_global/" class="uri">https://worldhealthorg.shinyapps.io/mpx_global/</a><a href="#fnref6" class="footnote-back" role="doc-backlink">↩︎</a></p></li>
<li id="fn7"><p><a href="https://en.wikipedia.org/wiki/List_of_WHO_regions" class="uri">https://en.wikipedia.org/wiki/List_of_WHO_regions</a><a href="#fnref7" class="footnote-back" role="doc-backlink">↩︎</a></p></li>
<li id="fn8"><p><a href="https://worldhealthorg.shinyapps.io/mpx_global/" class="uri">https://worldhealthorg.shinyapps.io/mpx_global/</a><a href="#fnref8" class="footnote-back" role="doc-backlink">↩︎</a></p></li>
<li id="fn9"><p>Mikhail Popov, Data Science Manager in Product Analytics at the Wikimedia Foundation, has published a list of R packages related to or affiliated with the Wikimedia Foundation here: <a href="https://people.wikimedia.org/~bearloga/notes/r-pkgs.html" class="uri">https://people.wikimedia.org/~bearloga/notes/r-pkgs.html</a><a href="#fnref9" class="footnote-back" role="doc-backlink">↩︎</a></p></li>
<li id="fn10"><p>A complete collection of Wikipedia projects is available here: <a href="https://www.mediawiki.org/wiki/Special:SiteMatrix" class="uri">https://www.mediawiki.org/wiki/Special:SiteMatrix</a><a href="#fnref10" class="footnote-back" role="doc-backlink">↩︎</a></p></li>
<li id="fn11"><p><a href="https://www.mediawiki.org/wiki/Help:Redirects" class="uri">https://www.mediawiki.org/wiki/Help:Redirects</a><a href="#fnref11" class="footnote-back" role="doc-backlink">↩︎</a></p></li>
<li id="fn12"><p><a href="https://www.who.int/emergencies/situations/monkeypox-oubreak-2022" class="uri">https://www.who.int/emergencies/situations/monkeypox-oubreak-2022</a><a href="#fnref12" class="footnote-back" role="doc-backlink">↩︎</a></p></li>
<li id="fn13"><p><a href="https://www.who.int/europe/news/item/23-07-2022-who-director-general-declares-the-ongoing-monkeypox-outbreak-a-public-health-event-of-international-concern" class="uri">https://www.who.int/europe/news/item/23-07-2022-who-director-general-declares-the-ongoing-monkeypox-outbreak-a-public-health-event-of-international-concern</a><a href="#fnref13" class="footnote-back" role="doc-backlink">↩︎</a></p></li>
<li id="fn14"><p><a href="https://www.who.int/news-room/fact-sheets/detail/monkeypox" class="uri">https://www.who.int/news-room/fact-sheets/detail/monkeypox</a><a href="#fnref14" class="footnote-back" role="doc-backlink">↩︎</a></p></li>
</ol>
</section></div></main>
<!-- /main column -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    text: function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
  function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
    const config = {
      allowHTML: true,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start',
    };
    if (contentFn) {
      config.content = contentFn;
    }
    if (onTriggerFn) {
      config.onTrigger = onTriggerFn;
    }
    if (onUntriggerFn) {
      config.onUntrigger = onUntriggerFn;
    }
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      return note.innerHTML;
    });
  }
  const xrefs = window.document.querySelectorAll('a.quarto-xref');
  const processXRef = (id, note) => {
    // Strip column container classes
    const stripColumnClz = (el) => {
      el.classList.remove("page-full", "page-columns");
      if (el.children) {
        for (const child of el.children) {
          stripColumnClz(child);
        }
      }
    }
    stripColumnClz(note)
    if (id === null || id.startsWith('sec-')) {
      // Special case sections, only their first couple elements
      const container = document.createElement("div");
      if (note.children && note.children.length > 2) {
        container.appendChild(note.children[0].cloneNode(true));
        for (let i = 1; i < note.children.length; i++) {
          const child = note.children[i];
          if (child.tagName === "P" && child.innerText === "") {
            continue;
          } else {
            container.appendChild(child.cloneNode(true));
            break;
          }
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(container);
        }
        return container.innerHTML
      } else {
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        return note.innerHTML;
      }
    } else {
      // Remove any anchor links if they are present
      const anchorLink = note.querySelector('a.anchorjs-link');
      if (anchorLink) {
        anchorLink.remove();
      }
      if (window.Quarto?.typesetMath) {
        window.Quarto.typesetMath(note);
      }
      // TODO in 1.5, we should make sure this works without a callout special case
      if (note.classList.contains("callout")) {
        return note.outerHTML;
      } else {
        return note.innerHTML;
      }
    }
  }
  for (var i=0; i<xrefs.length; i++) {
    const xref = xrefs[i];
    tippyHover(xref, undefined, function(instance) {
      instance.disable();
      let url = xref.getAttribute('href');
      let hash = undefined; 
      if (url.startsWith('#')) {
        hash = url;
      } else {
        try { hash = new URL(url).hash; } catch {}
      }
      if (hash) {
        const id = hash.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note !== null) {
          try {
            const html = processXRef(id, note.cloneNode(true));
            instance.setContent(html);
          } finally {
            instance.enable();
            instance.show();
          }
        } else {
          // See if we can fetch this
          fetch(url.split('#')[0])
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.getElementById(id);
            if (note !== null) {
              const html = processXRef(id, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      } else {
        // See if we can fetch a full url (with no hash to target)
        // This is a special case and we should probably do some content thinning / targeting
        fetch(url)
        .then(res => res.text())
        .then(html => {
          const parser = new DOMParser();
          const htmlDoc = parser.parseFromString(html, "text/html");
          const note = htmlDoc.querySelector('main.content');
          if (note !== null) {
            // This should only happen for chapter cross references
            // (since there is no id in the URL)
            // remove the first header
            if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
              note.children[0].remove();
            }
            const html = processXRef(null, note);
            instance.setContent(html);
          } 
        }).finally(() => {
          instance.enable();
          instance.show();
        });
      }
    }, function(instance) {
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            div.style.left = 0;
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
        // Handle positioning of the toggle
    window.addEventListener(
      "resize",
      throttle(() => {
        elRect = undefined;
        if (selectedAnnoteEl) {
          selectCodeLines(selectedAnnoteEl);
        }
      }, 10)
    );
    function throttle(fn, ms) {
    let throttle = false;
    let timer;
      return (...args) => {
        if(!throttle) { // first call gets through
            fn.apply(this, args);
            throttle = true;
        } else { // all the others get throttled
            if(timer) clearTimeout(timer); // cancel #2
            timer = setTimeout(() => {
              fn.apply(this, args);
              timer = throttle = false;
            }, ms);
        }
      };
    }
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
</div> <!-- /content -->




</body></html>